import streamlit as st
import pandas as pd

\
# -----------------------------
# ë°ì´í„° ìƒì„±
# -----------------------------
data = {
    "ì‹œê°„(ë¶„)": list(range(21)),
    "í™œì„±íƒ„": [5000,4612,4235,3827,3502,3208,2951,2698,2465,2243,
             2048,1863,1704,1568,1442,1331,1230,1142,1065,1002,950],
    "ìˆ¯": [5000,4948,4890,4832,4774,4720,4675,4632,4593,4556,
          4521,4488,4459,4430,4404,4380,4358,4336,4315,4297,4280],
    "í‘ì—°": [500,499,499,498,498,498,498,497,497,497,
           497,497,497,497,497,497,497,496,496,496,496]
}

df = pd.DataFrame(data)

if st.button(" ë°ì´í„° ìƒì„±"):
    
    st.header("1. ì‹¤í—˜ ë°ì´í„°")
    st.dataframe(df, use_container_width=True)

    st.header("2. ì‹œê°„ë³„ COâ‚‚ ë†ë„ ë³€í™”")
    st.line_chart(
        df.set_index("ì‹œê°„(ë¶„)")[["í™œì„±íƒ„", "ìˆ¯", "í‘ì—°"]],
        height=400
    )

    st.header("3. ì‹œê°„ ì„ íƒ ë¶„ì„")
    time = st.slider("í™•ì¸í•  ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš” (ë¶„)", 0, 20, 10)
    selected = df[df["ì‹œê°„(ë¶„)"] == time]

    st.write(f"â± **{time}ë¶„ í›„ COâ‚‚ ë†ë„ (ppm)**")
    st.table(selected.set_index("ì‹œê°„(ë¶„)"))

    st.header("4. COâ‚‚ ì œê±° íš¨ìœ¨ ë¶„ì„")
    initial = 5000
    final_values = df.iloc[-1][["í™œì„±íƒ„", "ìˆ¯", "í‘ì—°"]]
    efficiency = (initial - final_values) / initial * 100

    eff_df = pd.DataFrame({
        "í¡ì°©ì œ": efficiency.index,
        "ì œê±° íš¨ìœ¨ (%)": efficiency.values
    }).set_index("í¡ì°©ì œ")

    st.bar_chart(eff_df)

    st.header("5. ê²°ë¡ ")
    st.markdown("""
    - **í™œì„±íƒ„**: ê°€ì¥ ë†’ì€ COâ‚‚ ì œê±° íš¨ìœ¨  
    - **ìˆ¯**: ì¤‘ê°„ ìˆ˜ì¤€ì˜ í¡ì°© ì„±ëŠ¥  
    - **í‘ì—°**: ê±°ì˜ í¡ì°©ë˜ì§€ ì•ŠìŒ  

    ğŸ‘‰ **ë¹„í‘œë©´ì ê³¼ ê¸°ê³µ êµ¬ì¡°ê°€ íƒ„ì†Œ í¬ì§‘ íš¨ìœ¨ì„ ê²°ì •**
    """)

